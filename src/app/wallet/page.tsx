'use client'
import React from 'react';
import { SendDialog } from '@/components/send-dialog';
import { ReceiveDialog } from '@/components/receive-dialog';
import {
  Card,
  CardContent,
} from '@/components/ui/card';
import { ArrowUp, ArrowDown, Gift, CheckSquare, Pickaxe, History, Users } from 'lucide-react';
import { Separator } from '@/components/ui/separator';
import { useFirebase, useUser, useMemoFirebase } from '@/firebase';
import { doc, collection, query, orderBy } from 'firebase/firestore';
import { useDoc } from '@/firebase/firestore/use-doc';
import { useCollection } from '@/firebase/firestore/use-collection';
import { formatDistanceToNow } from 'date-fns';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Logo } from '@/components/icons';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

const NOTIFICATION_ICONS: { [key: string]: React.ElementType } = {
  send: ArrowUp,
  receive: ArrowDown,
  bonus: Gift,
  reward: CheckSquare,
  mining: Pickaxe,
  default: History,
};

const UsdtIcon = () => (
    <div className="h-10 w-10 rounded-full bg-[#26A17B] flex items-center justify-center flex-shrink-0">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            width="100%" viewBox="0 0 512 512" enableBackground="new 0 0 512 512" xmlSpace="preserve" className="h-6 w-6">
            <path fill="#000000" opacity="1.000000" stroke="none" 
                d="
M289.000000,0.999998 
	C363.593719,1.000000 438.187408,1.000000 513.000000,1.000000 
	C513.000000,75.354088 513.000000,149.708389 512.676331,224.794189 
	C511.846466,224.349808 511.340271,223.173920 510.899353,221.585815 
	C510.587677,218.448120 510.210693,215.722656 509.874756,212.601929 
	C508.225616,204.803177 506.535461,197.399704 504.777466,189.626663 
	C502.847595,183.823563 500.985596,178.390015 499.071472,172.568481 
	C497.054108,167.107742 495.088867,162.035004 493.062134,156.597702 
	C490.611450,151.252960 488.222260,146.272781 485.852448,140.925446 
	C484.052826,137.417191 482.233826,134.276077 480.252777,130.848282 
	C478.432220,128.028702 476.773712,125.495811 475.057007,122.603447 
	C471.035980,116.480759 467.073151,110.717552 462.964081,104.638069 
	C458.584351,99.200630 454.350830,94.079475 450.060303,88.611420 
	C447.038513,85.160637 444.073730,82.056755 440.969666,78.645889 
	C434.904663,72.857819 428.978882,67.376724 422.913177,61.586548 
	C411.887146,53.502895 401.001038,45.728333 389.948669,37.641735 
	C389.073944,36.941326 388.377808,36.528332 387.655212,36.168365 
	C380.144318,32.426819 372.629181,28.693815 364.956055,24.627567 
	C363.372864,23.593845 361.980194,22.816963 360.520172,22.199232 
	C338.186188,12.749644 315.289673,5.335709 290.997620,2.910339 
	C290.275360,2.838226 289.663391,1.661634 289.000000,0.999998 
z"/>
            <path fill="#000000" opacity="1.000000" stroke="none" 
                d="
M513.000000,289.000000 
	C513.000000,363.593719 513.000000,438.187408 513.000000,513.000000 
	C438.645905,513.000000 364.291626,513.000000 289.437286,512.589111 
	C289.610779,511.797638 290.244537,511.201904 290.963806,511.069061 
	C300.342773,509.336273 309.920746,508.345612 319.075287,505.816650 
	C330.910034,502.547272 342.409088,498.062469 354.384888,494.055664 
	C355.158264,493.942474 355.599457,493.874664 356.277527,493.780457 
	C356.797638,493.580811 356.995270,493.337921 357.467346,492.986877 
	C360.089142,491.958191 362.441315,491.132660 364.597107,489.949341 
	C374.113312,484.726196 383.572968,479.399994 393.401855,474.045715 
	C401.851135,468.022156 409.951691,462.063995 418.300171,456.040405 
	C418.710754,455.922241 418.873352,455.869507 419.277649,455.798737 
	C419.811554,455.607300 420.008575,455.358490 420.404968,454.881897 
	C427.173004,448.498688 433.646393,442.267914 440.411438,435.884827 
	C444.153046,431.854645 447.603027,427.976715 451.352600,423.941833 
	C455.453125,418.890472 459.253998,413.996094 463.356995,408.941406 
	C467.310852,403.430115 470.962555,398.079071 474.732666,392.624359 
	C474.851074,392.520691 474.859436,392.206055 475.111298,392.090302 
	C475.516357,391.666199 475.669586,391.357819 475.979736,390.729614 
	C478.369019,386.271667 480.601318,382.133545 483.001465,377.685730 
	C486.479492,370.598145 489.789673,363.820251 493.392944,356.828552 
	C494.127808,355.383606 494.600372,354.162476 495.006317,352.919617 
	C497.387695,345.629272 499.753448,338.333893 502.426849,330.818512 
	C503.763855,326.062958 504.798523,321.529053 506.015594,316.650116 
	C507.075836,312.201843 507.953674,308.098633 508.915802,303.597473 
	C509.667847,299.578827 510.226929,295.932678 511.064117,292.351562 
	C511.345154,291.149200 512.334412,290.112427 513.000000,289.000000 
z"/>
            <path fill="#000000" opacity="1.000000" stroke="none" 
                d="
M225.000000,513.000000 
	C150.406296,513.000000 75.812599,513.000000 1.000000,513.000000 
	C1.000000,438.645905 1.000000,364.291626 1.409418,289.347168 
	C2.601058,292.503204 3.383280,296.249420 4.102994,300.402496 
	C5.343623,306.241699 6.646760,311.673981 7.968387,317.511597 
	C9.294977,322.624268 10.603077,327.331665 11.944984,332.430634 
	C15.281261,341.562927 18.583729,350.303619 21.945030,359.414429 
	C25.318630,366.557098 28.633400,373.329651 32.099136,380.414856 
	C34.462063,384.505035 36.674026,388.282532 39.043121,392.369385 
	C42.435528,397.471008 45.670795,402.263275 49.059608,407.359253 
	C53.438137,412.789490 57.663120,417.916077 62.040672,423.349426 
	C66.089355,427.783508 69.985466,431.910797 74.037239,436.336853 
	C81.780136,443.461365 89.367363,450.287140 97.112503,457.410126 
	C105.164436,463.176971 113.058472,468.646545 121.117752,474.413940 
	C125.787041,477.413940 130.128036,480.450348 134.831100,482.744537 
	C143.089981,486.773254 151.570557,490.347504 160.170410,494.396271 
	C178.151947,501.978668 196.482391,507.224335 215.505646,510.079956 
	C218.743591,510.566040 221.838837,512.002563 225.000000,513.000000 
z"/>
            <path fill="#000000" opacity="1.000000" stroke="none" 
                d="
M0.999999,224.000000 
	C1.000000,149.739456 1.000000,75.478920 1.000000,1.000000 
	C75.354088,1.000000 149.708389,1.000000 224.837097,1.358670 
	C224.603424,2.141523 223.629852,2.791579 222.581421,2.951848 
	C217.278305,3.762523 211.879242,4.095532 206.653595,5.236259 
	C187.120255,9.500278 168.014587,15.145624 149.570984,23.932472 
	C141.456482,28.287819 133.706833,32.583916 125.596344,36.934731 
	C123.420029,38.004227 121.462997,38.829826 119.812340,40.064896 
	C110.130028,47.309471 100.519279,54.649685 90.572166,62.091614 
	C84.467453,67.804054 78.674973,73.382530 72.578857,79.093033 
	C69.144394,82.802872 66.013565,86.380684 62.576393,90.092934 
	C58.141853,95.471207 54.013653,100.715042 49.575928,106.101852 
	C45.471233,112.151932 41.676071,118.059029 37.579159,124.128029 
	C35.907185,126.859528 34.536957,129.429123 33.007797,132.316040 
	C30.859043,136.409683 28.869221,140.185989 26.571783,144.136932 
	C24.159124,149.505905 22.054081,154.700241 19.631094,160.077789 
	C16.930914,166.839615 14.548680,173.418213 12.083447,180.384399 
	C10.650282,186.146057 9.300115,191.520111 7.618505,197.112244 
	C6.508029,201.851318 5.728996,206.372284 4.611729,211.127930 
	C3.810462,215.561432 3.347430,219.760284 2.513190,224.129181 
	C1.761322,224.199478 1.380660,224.099747 0.999999,224.000000 
z"/>
            <path fill="#3A9A81" opacity="1.000000" stroke="none" 
                d="
M513.000000,288.550018 
	C512.334412,290.112427 511.345154,291.149200 511.064117,292.351562 
	C510.226929,295.932678 509.667847,299.578827 508.458099,303.598389 
	C433.251648,303.997559 358.587158,303.997894 283.813049,303.540649 
	C283.703400,296.180695 283.703400,289.278259 283.703400,282.193817 
	C297.148071,280.903473 310.107452,279.659668 323.501038,278.629578 
	C326.872375,279.229126 329.809204,279.948517 332.746796,279.951691 
	C392.831116,280.016907 452.915588,280.000305 513.000000,280.000000 
	C513.000000,282.700012 513.000000,285.400024 513.000000,288.550018 
z"/>
            <path fill="#3D9E85" opacity="1.000000" stroke="none" 
                d="
M1.000000,284.000000 
	C1.000000,275.979095 1.000000,267.958191 1.468657,259.468628 
	C28.378881,259.000000 54.821152,258.883118 81.261765,259.042023 
	C98.198120,259.143829 115.132027,259.652618 132.374298,260.114441 
	C140.130249,263.815338 147.288620,268.295166 155.083557,270.769989 
	C176.146317,277.457275 198.101791,279.401855 219.849304,281.636047 
	C218.399963,282.556458 217.130081,283.649200 215.810059,283.713562 
	C210.369370,283.978882 204.913467,283.990051 199.463135,283.991180 
	C133.308762,284.004791 67.154381,284.000000 1.000000,284.000000 
z"/>
            <path fill="#3A9A81" opacity="1.000000" stroke="none" 
                d="
M1.000000,284.416656 
	C67.154381,284.000000 133.308762,284.004791 199.463135,283.991180 
	C204.913467,283.990051 210.369370,283.978882 215.810059,283.713562 
	C217.130081,283.649200 218.399963,282.556458 220.256836,281.579346 
	C223.903870,281.505402 226.986938,281.788696 230.074539,282.072388 
	C230.074539,288.744629 230.074539,294.871368 229.601196,300.998596 
	C158.268311,300.999359 87.408722,301.016479 16.549213,300.957092 
	C12.421043,300.953613 8.293393,300.330414 4.165501,299.995605 
	C3.383280,296.249420 2.601058,292.503204 1.409418,288.878510 
	C1.000000,287.611115 1.000000,286.222198 1.000000,284.416656 
z"/>
            <path fill="#65C9AF" opacity="1.000000" stroke="none" 
                d="
M149.935806,23.873222 
	C168.014587,15.145624 187.120255,9.500278 206.653595,5.236259 
	C211.879242,4.095532 217.278305,3.762523 222.581421,2.951848 
	C223.629852,2.791579 224.603424,2.141523 225.305756,1.358670 
	C246.020889,1.000000 267.041779,1.000000 288.531342,0.999998 
	C289.663391,1.661634 290.275360,2.838226 290.997620,2.910339 
	C315.289673,5.335709 338.186188,12.749644 360.520172,22.199232 
	C361.980194,22.816963 363.372864,23.593845 364.480103,24.635925 
	C294.840820,24.983328 225.518326,25.001341 156.195862,24.952358 
	C154.108932,24.950884 152.022476,24.248707 149.935806,23.873222 
z"/>
            <path fill="#3D9E85" opacity="1.000000" stroke="none" 
                d="
M513.000000,279.531433 
	C452.915588,280.000305 392.831116,280.016907 332.746796,279.951691 
	C329.809204,279.948517 326.872375,279.229126 323.914551,278.493591 
	C336.677795,275.408508 349.562286,273.062317 362.209198,269.796204 
	C370.204529,267.731384 377.935883,264.453430 384.078735,257.869720 
	C427.381683,257.934113 470.190857,257.967072 513.000000,258.000000 
	C513.000000,265.020966 513.000000,272.041901 513.000000,279.531433 
z"/>
            <path fill="#44A58C" opacity="1.000000" stroke="none" 
                d="
M510.834076,221.998047 
	C511.340271,223.173920 511.846466,224.349808 512.676331,225.262848 
	C513.000000,229.024551 513.000000,233.049088 512.531372,237.536819 
	C467.533844,238.000092 423.004913,237.961212 378.476532,238.101852 
	C375.937592,238.109863 373.403320,239.586563 370.496460,240.298233 
	C343.750549,230.569000 316.220459,227.535049 288.434662,226.025375 
	C285.666138,225.874954 282.733246,226.376266 284.398468,221.999023 
	C360.192566,221.998901 435.513336,221.998474 510.834076,221.998047 
z"/>
            <path fill="#19775F" opacity="1.000000" stroke="none" 
                d="
M225.468658,513.000000 
	C221.838837,512.002563 218.743591,510.566040 215.505646,510.079956 
	C196.482391,507.224335 178.151947,501.978668 160.352905,494.047119 
	C162.167664,492.942810 164.011536,492.062378 165.856491,492.060150 
	C225.047028,491.988220 284.237762,491.965149 343.428131,492.091217 
	C346.971039,492.098755 350.511230,493.401154 354.052673,494.101044 
	C342.409088,498.062469 330.910034,502.547272 319.075287,505.816650 
	C309.920746,508.345612 300.342773,509.336273 290.963806,511.069061 
	C290.244537,511.201904 289.610779,511.797638 288.968628,512.589111 
	C267.979095,513.000000 246.958206,513.000000 225.468658,513.000000 
z"/>
            <path fill="#44A58C" opacity="1.000000" stroke="none" 
                d="
M0.999999,224.466125 
	C1.380660,224.099747 1.761322,224.199478 2.940135,224.102448 
	C7.039076,223.603775 10.339644,223.041367 13.640687,223.038574 
	C75.532661,222.986084 137.424744,222.968185 199.316666,223.045273 
	C206.111893,223.053726 212.911697,223.613007 219.695831,224.104019 
	C220.832108,224.186249 221.898819,225.229721 222.550781,225.895508 
	C195.285767,227.924225 168.673904,231.043793 142.716431,239.882202 
	C139.854507,239.482483 137.385849,239.033249 134.916779,239.030899 
	C90.277878,238.988525 45.638935,239.000000 1.000000,239.000000 
	C1.000000,234.310745 1.000000,229.621490 0.999999,224.466125 
z"/>
            <path fill="#41A289" opacity="1.000000" stroke="none" 
                d="
M370.866882,240.379730 
	C373.403320,239.586563 375.937592,238.109863 378.476532,238.101852 
	C423.004913,237.961212 467.533844,238.000092 512.531372,238.000000 
	C513.000000,244.354401 513.000000,250.708801 513.000000,257.531616 
	C470.190857,257.967072 427.381683,257.934113 384.195312,257.515717 
	C385.819733,252.788803 384.159058,249.297806 380.810760,246.693909 
	C377.725342,244.294434 374.199005,242.461960 370.866882,240.379730 
z"/>
            <path fill="#41A289" opacity="1.000000" stroke="none" 
                d="
M1.000000,239.468414 
	C45.638935,239.000000 90.277878,238.988525 134.916779,239.030899 
	C137.385849,239.033249 139.854507,239.482483 142.530197,240.201050 
	C142.277832,240.841248 141.817383,241.000717 141.359589,241.167450 
	C130.717346,245.043427 127.153282,252.258942 132.067032,259.978943 
	C115.132027,259.652618 98.198120,259.143829 81.261765,259.042023 
	C54.821152,258.883118 28.378881,259.000000 1.468657,259.000000 
	C1.000000,252.645599 1.000000,246.291214 1.000000,239.468414 
z"/>
            <path fill="#56B99F" opacity="1.000000" stroke="none" 
                d="
M37.880905,123.966125 
	C41.676071,118.059029 45.471233,112.151932 50.051865,106.110138 
	C185.979340,105.983421 321.121368,105.996536 456.263367,105.955872 
	C458.545776,105.955185 460.828003,105.302681 463.110321,104.954346 
	C467.073151,110.717552 471.035980,116.480759 474.641174,122.694069 
	C471.979980,123.428925 469.676483,123.962418 467.372864,123.962883 
	C324.208862,123.991661 181.044891,123.976898 37.880905,123.966125 
z"/>
            <path fill="#60C3AA" opacity="1.000000" stroke="none" 
                d="
M90.884392,61.957645 
	C100.519279,54.649685 110.130028,47.309471 119.812340,40.064896 
	C121.462997,38.829826 123.420029,38.004227 125.778046,37.284267 
	C128.334549,38.052780 130.348160,38.939102 132.362503,38.940769 
	C215.998108,39.010063 299.633789,39.008343 383.269409,38.956154 
	C385.551453,38.954731 387.833130,38.302505 390.114960,37.953766 
	C401.001038,45.728333 411.887146,53.502895 422.560913,61.812286 
	C420.383148,62.564732 418.417786,62.972218 416.452332,62.972786 
	C310.377380,63.003445 204.302414,63.006863 98.227478,62.956284 
	C95.779625,62.955116 93.332077,62.305038 90.884392,61.957645 
z"/>
            <path fill="#58BBA2" opacity="1.000000" stroke="none" 
                d="
M462.964081,104.638062 
	C460.828003,105.302681 458.545776,105.955185 456.263367,105.955872 
	C321.121368,105.996536 185.979340,105.983421 50.361389,105.967163 
	C54.013653,100.715042 58.141853,95.471207 63.015762,90.097870 
	C73.566261,89.645683 83.370872,89.048538 93.175880,89.042076 
	C212.156326,88.963692 331.136841,88.972321 450.117340,88.958321 
	C454.350830,94.079475 458.584351,99.200630 462.964081,104.638062 
z"/>
            <path fill="#5CBFA5" opacity="1.000000" stroke="none" 
                d="
M90.572166,62.091614 
	C93.332077,62.305038 95.779625,62.955116 98.227478,62.956284 
	C204.302414,63.006863 310.377380,63.003445 416.452332,62.972786 
	C418.417786,62.972218 420.383148,62.564732 422.700806,62.121372 
	C428.978882,67.376724 434.904663,72.857819 440.576904,78.805710 
	C438.022278,79.514961 435.721191,79.968842 433.420013,79.969521 
	C316.201508,80.003998 198.983017,80.007469 81.764526,79.956398 
	C78.803703,79.955109 75.843163,79.307289 72.882484,78.960999 
	C78.674973,73.382530 84.467453,67.804054 90.572166,62.091614 
z"/>
            <path fill="#52B59B" opacity="1.000000" stroke="none" 
                d="
M26.879398,143.962311 
	C28.869221,140.185989 30.859043,136.409683 33.416069,132.356705 
	C37.284309,132.386688 40.585224,132.959702 43.886414,132.961288 
	C142.624008,133.008896 241.361633,133.000031 340.099243,132.999985 
	C384.389648,132.999954 428.680084,133.029785 472.970245,132.920029 
	C475.453247,132.913879 477.933350,131.756516 480.414795,131.134964 
	C482.233826,134.276077 484.052826,137.417191 485.504517,141.226959 
	C482.645569,142.596344 480.154236,143.908936 477.662170,143.910355 
	C327.401276,143.996140 177.140350,143.974152 26.879398,143.962311 
z"/>
            <path fill="#50B399" opacity="1.000000" stroke="none" 
                d="
M26.571783,144.136932 
	C177.140350,143.974152 327.401276,143.996140 477.662170,143.910355 
	C480.154236,143.908936 482.645569,142.596344 485.485168,141.594086 
	C488.222260,146.272781 490.611450,151.252960 492.585571,156.605621 
	C445.619049,156.986923 399.067596,156.995773 352.432465,156.548309 
	C352.348816,153.477783 352.348816,150.863541 352.348816,147.566910 
	C349.567596,147.566910 347.458893,147.566925 345.350220,147.566925 
	C286.400299,147.566940 227.450378,147.566803 168.500458,147.567749 
	C167.334839,147.567764 166.164658,147.648987 165.004517,147.572495 
	C162.466949,147.405197 161.407242,148.501663 161.432281,151.073410 
	C161.464584,154.389542 161.229385,157.708298 160.633911,161.020691 
	C115.843811,161.010300 71.529167,161.022507 27.214666,160.952866 
	C24.792242,160.949066 22.370890,160.263031 19.949039,159.894562 
	C22.054081,154.700241 24.159124,149.505905 26.571783,144.136932 
z"/>
            <path fill="#47A990" opacity="1.000000" stroke="none" 
                d="
M504.845276,189.996231 
	C506.535461,197.399704 508.225616,204.803177 509.416809,212.602524 
	C433.920349,212.998535 358.922943,212.998703 283.821655,212.540482 
	C283.717773,206.640350 283.717773,201.198593 283.717773,195.112228 
	C306.893799,195.112228 329.440033,195.112228 351.989471,195.112228 
	C352.210724,192.973602 352.364319,191.488800 352.954132,190.004700 
	C403.875305,190.002335 454.360291,189.999283 504.845276,189.996231 
z"/>
            <path fill="#54B69D" opacity="1.000000" stroke="none" 
                d="
M480.252808,130.848267 
	C477.933350,131.756516 475.453247,132.913879 472.970245,132.920029 
	C428.680084,133.029785 384.389648,132.999954 340.099243,132.999985 
	C241.361633,133.000031 142.624008,133.008896 43.886414,132.961288 
	C40.585224,132.959702 37.284309,132.386688 33.574997,132.039383 
	C34.536957,
